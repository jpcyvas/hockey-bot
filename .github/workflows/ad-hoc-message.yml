name: Ad Hoc Hockey Message

on:
  workflow_dispatch: # manual
    inputs:
        message:
            description: 'Message to send to Discord'
            required: true
            default: 'Hello from Hockey Bot!'
        webhook:
            description: 'Discord'
            required: true
            default: Test
            type: choice
            options:
            - Test
            - WonderPals
       

jobs:
  send-message:
    runs-on: ubuntu-latest

    steps:
      - name: Select enviorment
        run: |
          if [ "${{ github.event.inputs.webhook }}" = "Test" ]; then
            echo "DISCORD_WEBHOOK=${{ secrets.DISCORD_WEBHOOK }}" >> $GITHUB_ENV
          elif [ "${{ github.event.inputs.webhook }}" = "WonderPals" ]; then
            echo "DISCORD_WEBHOOK=${{ secrets.WEBHOOK_DISCORD_WONDERPALS_HOCKEY }}" >> $GITHUB_ENV
          else
            echo "Invalid webhook option"
            exit 1
          fi 


      - name: Discord notification
        env:
            DISCORD_WEBHOOK: ${{ env.DISCORD_WEBHOOK }}
            DISCORD_USERNAME: Hockey Bot
            DISCORD_AVATAR: https://www.deseret.com/resizer/v2/G562YQBSQRA75PCQJ5RVNKU52U.jpg?auth=8f789e666bf47e3c9210e847cdc803c1fbc8a66d254bbb603b76062b8e8a3426&focal=1281%2C846&width=800&height=600
        uses: Ilshidur/action-discord@master
        with:
          args: "${{ github.event.inputs.message }}"
